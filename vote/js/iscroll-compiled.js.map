{"version":3,"sources":["iscroll.js"],"names":[],"mappings":"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","file":"iscroll-compiled.js","sourcesContent":["/*!\r\n * iScroll v4.2.5 ~ Copyright (c) 2012 Matteo Spinelli, http://cubiq.org\r\n * Released under MIT license, http://cubiq.org/license\r\n */\r\n(function(window, doc){\r\nvar m = Math,\r\n\tdummyStyle = doc.createElement('div').style,\r\n\tvendor = (function () {\r\n\t\tvar vendors = 't,webkitT,MozT,msT,OT'.split(','),\r\n\t\t\tt,\r\n\t\t\ti = 0,\r\n\t\t\tl = vendors.length;\r\n\r\n\t\tfor ( ; i < l; i++ ) {\r\n\t\t\tt = vendors[i] + 'ransform';\r\n\t\t\tif ( t in dummyStyle ) {\r\n\t\t\t\treturn vendors[i].substr(0, vendors[i].length - 1);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn false;\r\n\t})(),\r\n\tcssVendor = vendor ? '-' + vendor.toLowerCase() + '-' : '',\r\n\r\n\t// Style properties\r\n\ttransform = prefixStyle('transform'),\r\n\ttransitionProperty = prefixStyle('transitionProperty'),\r\n\ttransitionDuration = prefixStyle('transitionDuration'),\r\n\ttransformOrigin = prefixStyle('transformOrigin'),\r\n\ttransitionTimingFunction = prefixStyle('transitionTimingFunction'),\r\n\ttransitionDelay = prefixStyle('transitionDelay'),\r\n\r\n    // Browser capabilities\r\n\tisAndroid = (/android/gi).test(navigator.appVersion),\r\n\tisIDevice = (/iphone|ipad/gi).test(navigator.appVersion),\r\n\tisTouchPad = (/hp-tablet/gi).test(navigator.appVersion),\r\n\r\n    has3d = prefixStyle('perspective') in dummyStyle,\r\n    hasTouch = 'ontouchstart' in window && !isTouchPad,\r\n    hasTransform = vendor !== false,\r\n    hasTransitionEnd = prefixStyle('transition') in dummyStyle,\r\n\r\n\tRESIZE_EV = 'onorientationchange' in window ? 'orientationchange' : 'resize',\r\n\tSTART_EV = hasTouch ? 'touchstart' : 'mousedown',\r\n\tMOVE_EV = hasTouch ? 'touchmove' : 'mousemove',\r\n\tEND_EV = hasTouch ? 'touchend' : 'mouseup',\r\n\tCANCEL_EV = hasTouch ? 'touchcancel' : 'mouseup',\r\n\tTRNEND_EV = (function () {\r\n\t\tif ( vendor === false ) return false;\r\n\r\n\t\tvar transitionEnd = {\r\n\t\t\t\t''\t\t\t: 'transitionend',\r\n\t\t\t\t'webkit'\t: 'webkitTransitionEnd',\r\n\t\t\t\t'Moz'\t\t: 'transitionend',\r\n\t\t\t\t'O'\t\t\t: 'otransitionend',\r\n\t\t\t\t'ms'\t\t: 'MSTransitionEnd'\r\n\t\t\t};\r\n\r\n\t\treturn transitionEnd[vendor];\r\n\t})(),\r\n\r\n\tnextFrame = (function() {\r\n\t\treturn window.requestAnimationFrame ||\r\n\t\t\twindow.webkitRequestAnimationFrame ||\r\n\t\t\twindow.mozRequestAnimationFrame ||\r\n\t\t\twindow.oRequestAnimationFrame ||\r\n\t\t\twindow.msRequestAnimationFrame ||\r\n\t\t\tfunction(callback) { return setTimeout(callback, 1); };\r\n\t})(),\r\n\tcancelFrame = (function () {\r\n\t\treturn window.cancelRequestAnimationFrame ||\r\n\t\t\twindow.webkitCancelAnimationFrame ||\r\n\t\t\twindow.webkitCancelRequestAnimationFrame ||\r\n\t\t\twindow.mozCancelRequestAnimationFrame ||\r\n\t\t\twindow.oCancelRequestAnimationFrame ||\r\n\t\t\twindow.msCancelRequestAnimationFrame ||\r\n\t\t\tclearTimeout;\r\n\t})(),\r\n\r\n\t// Helpers\r\n\ttranslateZ = has3d ? ' translateZ(0)' : '',\r\n\r\n\t// Constructor\r\n\tiScroll = function (el, options) {\r\n\t\tvar that = this,\r\n\t\t\ti;\r\n\r\n\t\tthat.wrapper = typeof el == 'object' ? el : doc.getElementById(el);\r\n\t\tthat.wrapper.style.overflow = 'hidden';\r\n\t\tthat.scroller = that.wrapper.children[0];\r\n\r\n\t\t// Default options\r\n\t\tthat.options = {\r\n\t\t\thScroll: true,\r\n\t\t\tvScroll: true,\r\n\t\t\tx: 0,\r\n\t\t\ty: 0,\r\n\t\t\tbounce: true,\r\n\t\t\tbounceLock: false,\r\n\t\t\tmomentum: true,\r\n\t\t\tlockDirection: true,\r\n\t\t\tuseTransform: true,\r\n\t\t\tuseTransition: false,\r\n\t\t\ttopOffset: 0,\r\n\t\t\tcheckDOMChanges: false,\t\t// Experimental\r\n\t\t\thandleClick: true,\r\n\r\n\t\t\t// Scrollbar\r\n\t\t\thScrollbar: true,\r\n\t\t\tvScrollbar: true,\r\n\t\t\tfixedScrollbar: isAndroid,\r\n\t\t\thideScrollbar: isIDevice,\r\n\t\t\tfadeScrollbar: isIDevice && has3d,\r\n\t\t\tscrollbarClass: '',\r\n\r\n\t\t\t// Zoom\r\n\t\t\tzoom: false,\r\n\t\t\tzoomMin: 1,\r\n\t\t\tzoomMax: 4,\r\n\t\t\tdoubleTapZoom: 2,\r\n\t\t\twheelAction: 'scroll',\r\n\r\n\t\t\t// Snap\r\n\t\t\tsnap: false,\r\n\t\t\tsnapThreshold: 1,\r\n\r\n\t\t\t// Events\r\n\t\t\tonRefresh: null,\r\n\t\t\tonBeforeScrollStart: function (e) { e.preventDefault(); },\r\n\t\t\tonScrollStart: null,\r\n\t\t\tonBeforeScrollMove: null,\r\n\t\t\tonScrollMove: null,\r\n\t\t\tonBeforeScrollEnd: null,\r\n\t\t\tonScrollEnd: null,\r\n\t\t\tonTouchEnd: null,\r\n\t\t\tonDestroy: null,\r\n\t\t\tonZoomStart: null,\r\n\t\t\tonZoom: null,\r\n\t\t\tonZoomEnd: null\r\n\t\t};\r\n\r\n\t\t// User defined options\r\n\t\tfor (i in options) that.options[i] = options[i];\r\n\t\t\r\n\t\t// Set starting position\r\n\t\tthat.x = that.options.x;\r\n\t\tthat.y = that.options.y;\r\n\r\n\t\t// Normalize options\r\n\t\tthat.options.useTransform = hasTransform && that.options.useTransform;\r\n\t\tthat.options.hScrollbar = that.options.hScroll && that.options.hScrollbar;\r\n\t\tthat.options.vScrollbar = that.options.vScroll && that.options.vScrollbar;\r\n\t\tthat.options.zoom = that.options.useTransform && that.options.zoom;\r\n\t\tthat.options.useTransition = hasTransitionEnd && that.options.useTransition;\r\n\r\n\t\t// Helpers FIX ANDROID BUG!\r\n\t\t// translate3d and scale doesn't work together!\r\n\t\t// Ignoring 3d ONLY WHEN YOU SET that.options.zoom\r\n\t\tif ( that.options.zoom && isAndroid ){\r\n\t\t\ttranslateZ = '';\r\n\t\t}\r\n\t\t\r\n\t\t// Set some default styles\r\n\t\tthat.scroller.style[transitionProperty] = that.options.useTransform ? cssVendor + 'transform' : 'top left';\r\n\t\tthat.scroller.style[transitionDuration] = '0';\r\n\t\tthat.scroller.style[transformOrigin] = '0 0';\r\n\t\tif (that.options.useTransition) that.scroller.style[transitionTimingFunction] = 'cubic-bezier(0.33,0.66,0.66,1)';\r\n\t\t\r\n\t\tif (that.options.useTransform) that.scroller.style[transform] = 'translate(' + that.x + 'px,' + that.y + 'px)' + translateZ;\r\n\t\telse that.scroller.style.cssText += ';position:absolute;top:' + that.y + 'px;left:' + that.x + 'px';\r\n\r\n\t\tif (that.options.useTransition) that.options.fixedScrollbar = true;\r\n\r\n\t\tthat.refresh();\r\n\r\n\t\tthat._bind(RESIZE_EV, window);\r\n\t\tthat._bind(START_EV);\r\n\t\tif (!hasTouch) {\r\n\t\t\tif (that.options.wheelAction != 'none') {\r\n\t\t\t\tthat._bind('DOMMouseScroll');\r\n\t\t\t\tthat._bind('mousewheel');\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (that.options.checkDOMChanges) that.checkDOMTime = setInterval(function () {\r\n\t\t\tthat._checkDOMChanges();\r\n\t\t}, 500);\r\n\t};\r\n\r\n// Prototype\r\niScroll.prototype = {\r\n\tenabled: true,\r\n\tx: 0,\r\n\ty: 0,\r\n\tsteps: [],\r\n\tscale: 1,\r\n\tcurrPageX: 0, currPageY: 0,\r\n\tpagesX: [], pagesY: [],\r\n\taniTime: null,\r\n\twheelZoomCount: 0,\r\n\t\r\n\thandleEvent: function (e) {\r\n\t\tvar that = this;\r\n\t\tswitch(e.type) {\r\n\t\t\tcase START_EV:\r\n\t\t\t\tif (!hasTouch && e.button !== 0) return;\r\n\t\t\t\tthat._start(e);\r\n\t\t\t\tbreak;\r\n\t\t\tcase MOVE_EV: that._move(e); break;\r\n\t\t\tcase END_EV:\r\n\t\t\tcase CANCEL_EV: that._end(e); break;\r\n\t\t\tcase RESIZE_EV: that._resize(); break;\r\n\t\t\tcase 'DOMMouseScroll': case 'mousewheel': that._wheel(e); break;\r\n\t\t\tcase TRNEND_EV: that._transitionEnd(e); break;\r\n\t\t}\r\n\t},\r\n\t\r\n\t_checkDOMChanges: function () {\r\n\t\tif (this.moved || this.zoomed || this.animating ||\r\n\t\t\t(this.scrollerW == this.scroller.offsetWidth * this.scale && this.scrollerH == this.scroller.offsetHeight * this.scale)) return;\r\n\r\n\t\tthis.refresh();\r\n\t},\r\n\t\r\n\t_scrollbar: function (dir) {\r\n\t\tvar that = this,\r\n\t\t\tbar;\r\n\r\n\t\tif (!that[dir + 'Scrollbar']) {\r\n\t\t\tif (that[dir + 'ScrollbarWrapper']) {\r\n\t\t\t\tif (hasTransform) that[dir + 'ScrollbarIndicator'].style[transform] = '';\r\n\t\t\t\tthat[dir + 'ScrollbarWrapper'].parentNode.removeChild(that[dir + 'ScrollbarWrapper']);\r\n\t\t\t\tthat[dir + 'ScrollbarWrapper'] = null;\r\n\t\t\t\tthat[dir + 'ScrollbarIndicator'] = null;\r\n\t\t\t}\r\n\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tif (!that[dir + 'ScrollbarWrapper']) {\r\n\t\t\t// Create the scrollbar wrapper\r\n\t\t\tbar = doc.createElement('div');\r\n\r\n\t\t\tif (that.options.scrollbarClass) bar.className = that.options.scrollbarClass + dir.toUpperCase();\r\n\t\t\telse bar.style.cssText = 'position:absolute;z-index:100;' + (dir == 'h' ? 'height:7px;bottom:1px;left:2px;right:' + (that.vScrollbar ? '7' : '2') + 'px' : 'width:7px;bottom:' + (that.hScrollbar ? '7' : '2') + 'px;top:2px;right:1px');\r\n\r\n\t\t\tbar.style.cssText += ';pointer-events:none;' + cssVendor + 'transition-property:opacity;' + cssVendor + 'transition-duration:' + (that.options.fadeScrollbar ? '350ms' : '0') + ';overflow:hidden;opacity:' + (that.options.hideScrollbar ? '0' : '1');\r\n\r\n\t\t\tthat.wrapper.appendChild(bar);\r\n\t\t\tthat[dir + 'ScrollbarWrapper'] = bar;\r\n\r\n\t\t\t// Create the scrollbar indicator\r\n\t\t\tbar = doc.createElement('div');\r\n\t\t\tif (!that.options.scrollbarClass) {\r\n\t\t\t\tbar.style.cssText = 'position:absolute;z-index:100;background:rgba(0,0,0,0.5);border:1px solid rgba(255,255,255,0.9);' + cssVendor + 'background-clip:padding-box;' + cssVendor + 'box-sizing:border-box;' + (dir == 'h' ? 'height:100%' : 'width:100%') + ';' + cssVendor + 'border-radius:3px;border-radius:3px';\r\n\t\t\t}\r\n\t\t\tbar.style.cssText += ';pointer-events:none;' + cssVendor + 'transition-property:' + cssVendor + 'transform;' + cssVendor + 'transition-timing-function:cubic-bezier(0.33,0.66,0.66,1);' + cssVendor + 'transition-duration:0;' + cssVendor + 'transform: translate(0,0)' + translateZ;\r\n\t\t\tif (that.options.useTransition) bar.style.cssText += ';' + cssVendor + 'transition-timing-function:cubic-bezier(0.33,0.66,0.66,1)';\r\n\r\n\t\t\tthat[dir + 'ScrollbarWrapper'].appendChild(bar);\r\n\t\t\tthat[dir + 'ScrollbarIndicator'] = bar;\r\n\t\t}\r\n\r\n\t\tif (dir == 'h') {\r\n\t\t\tthat.hScrollbarSize = that.hScrollbarWrapper.clientWidth;\r\n\t\t\tthat.hScrollbarIndicatorSize = m.max(m.round(that.hScrollbarSize * that.hScrollbarSize / that.scrollerW), 8);\r\n\t\t\tthat.hScrollbarIndicator.style.width = that.hScrollbarIndicatorSize + 'px';\r\n\t\t\tthat.hScrollbarMaxScroll = that.hScrollbarSize - that.hScrollbarIndicatorSize;\r\n\t\t\tthat.hScrollbarProp = that.hScrollbarMaxScroll / that.maxScrollX;\r\n\t\t} else {\r\n\t\t\tthat.vScrollbarSize = that.vScrollbarWrapper.clientHeight;\r\n\t\t\tthat.vScrollbarIndicatorSize = m.max(m.round(that.vScrollbarSize * that.vScrollbarSize / that.scrollerH), 8);\r\n\t\t\tthat.vScrollbarIndicator.style.height = that.vScrollbarIndicatorSize + 'px';\r\n\t\t\tthat.vScrollbarMaxScroll = that.vScrollbarSize - that.vScrollbarIndicatorSize;\r\n\t\t\tthat.vScrollbarProp = that.vScrollbarMaxScroll / that.maxScrollY;\r\n\t\t}\r\n\r\n\t\t// Reset position\r\n\t\tthat._scrollbarPos(dir, true);\r\n\t},\r\n\t\r\n\t_resize: function () {\r\n\t\tvar that = this;\r\n\t\tsetTimeout(function () { that.refresh(); }, isAndroid ? 200 : 0);\r\n\t},\r\n\t\r\n\t_pos: function (x, y) {\r\n\t\tif (this.zoomed) return;\r\n\r\n\t\tx = this.hScroll ? x : 0;\r\n\t\ty = this.vScroll ? y : 0;\r\n\r\n\t\tif (this.options.useTransform) {\r\n\t\t\tthis.scroller.style[transform] = 'translate(' + x + 'px,' + y + 'px) scale(' + this.scale + ')' + translateZ;\r\n\t\t} else {\r\n\t\t\tx = m.round(x);\r\n\t\t\ty = m.round(y);\r\n\t\t\tthis.scroller.style.left = x + 'px';\r\n\t\t\tthis.scroller.style.top = y + 'px';\r\n\t\t}\r\n\r\n\t\tthis.x = x;\r\n\t\tthis.y = y;\r\n\r\n\t\tthis._scrollbarPos('h');\r\n\t\tthis._scrollbarPos('v');\r\n\t},\r\n\r\n\t_scrollbarPos: function (dir, hidden) {\r\n\t\tvar that = this,\r\n\t\t\tpos = dir == 'h' ? that.x : that.y,\r\n\t\t\tsize;\r\n\r\n\t\tif (!that[dir + 'Scrollbar']) return;\r\n\r\n\t\tpos = that[dir + 'ScrollbarProp'] * pos;\r\n\r\n\t\tif (pos < 0) {\r\n\t\t\tif (!that.options.fixedScrollbar) {\r\n\t\t\t\tsize = that[dir + 'ScrollbarIndicatorSize'] + m.round(pos * 3);\r\n\t\t\t\tif (size < 8) size = 8;\r\n\t\t\t\tthat[dir + 'ScrollbarIndicator'].style[dir == 'h' ? 'width' : 'height'] = size + 'px';\r\n\t\t\t}\r\n\t\t\tpos = 0;\r\n\t\t} else if (pos > that[dir + 'ScrollbarMaxScroll']) {\r\n\t\t\tif (!that.options.fixedScrollbar) {\r\n\t\t\t\tsize = that[dir + 'ScrollbarIndicatorSize'] - m.round((pos - that[dir + 'ScrollbarMaxScroll']) * 3);\r\n\t\t\t\tif (size < 8) size = 8;\r\n\t\t\t\tthat[dir + 'ScrollbarIndicator'].style[dir == 'h' ? 'width' : 'height'] = size + 'px';\r\n\t\t\t\tpos = that[dir + 'ScrollbarMaxScroll'] + (that[dir + 'ScrollbarIndicatorSize'] - size);\r\n\t\t\t} else {\r\n\t\t\t\tpos = that[dir + 'ScrollbarMaxScroll'];\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthat[dir + 'ScrollbarWrapper'].style[transitionDelay] = '0';\r\n\t\tthat[dir + 'ScrollbarWrapper'].style.opacity = hidden && that.options.hideScrollbar ? '0' : '1';\r\n\t\tthat[dir + 'ScrollbarIndicator'].style[transform] = 'translate(' + (dir == 'h' ? pos + 'px,0)' : '0,' + pos + 'px)') + translateZ;\r\n\t},\r\n\t\r\n\t_start: function (e) {\r\n\t\tvar that = this,\r\n\t\t\tpoint = hasTouch ? e.touches[0] : e,\r\n\t\t\tmatrix, x, y,\r\n\t\t\tc1, c2;\r\n\r\n\t\tif (!that.enabled) return;\r\n\r\n\t\tif (that.options.onBeforeScrollStart) that.options.onBeforeScrollStart.call(that, e);\r\n\r\n\t\tif (that.options.useTransition || that.options.zoom) that._transitionTime(0);\r\n\r\n\t\tthat.moved = false;\r\n\t\tthat.animating = false;\r\n\t\tthat.zoomed = false;\r\n\t\tthat.distX = 0;\r\n\t\tthat.distY = 0;\r\n\t\tthat.absDistX = 0;\r\n\t\tthat.absDistY = 0;\r\n\t\tthat.dirX = 0;\r\n\t\tthat.dirY = 0;\r\n\r\n\t\t// Gesture start\r\n\t\tif (that.options.zoom && hasTouch && e.touches.length > 1) {\r\n\t\t\tc1 = m.abs(e.touches[0].pageX-e.touches[1].pageX);\r\n\t\t\tc2 = m.abs(e.touches[0].pageY-e.touches[1].pageY);\r\n\t\t\tthat.touchesDistStart = m.sqrt(c1 * c1 + c2 * c2);\r\n\r\n\t\t\tthat.originX = m.abs(e.touches[0].pageX + e.touches[1].pageX - that.wrapperOffsetLeft * 2) / 2 - that.x;\r\n\t\t\tthat.originY = m.abs(e.touches[0].pageY + e.touches[1].pageY - that.wrapperOffsetTop * 2) / 2 - that.y;\r\n\r\n\t\t\tif (that.options.onZoomStart) that.options.onZoomStart.call(that, e);\r\n\t\t}\r\n\r\n\t\tif (that.options.momentum) {\r\n\t\t\tif (that.options.useTransform) {\r\n\t\t\t\t// Very lame general purpose alternative to CSSMatrix\r\n\t\t\t\tmatrix = getComputedStyle(that.scroller, null)[transform].replace(/[^0-9\\-.,]/g, '').split(',');\r\n\t\t\t\tx = +(matrix[12] || matrix[4]);\r\n\t\t\t\ty = +(matrix[13] || matrix[5]);\r\n\t\t\t} else {\r\n\t\t\t\tx = +getComputedStyle(that.scroller, null).left.replace(/[^0-9-]/g, '');\r\n\t\t\t\ty = +getComputedStyle(that.scroller, null).top.replace(/[^0-9-]/g, '');\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tif (x != that.x || y != that.y) {\r\n\t\t\t\tif (that.options.useTransition) that._unbind(TRNEND_EV);\r\n\t\t\t\telse cancelFrame(that.aniTime);\r\n\t\t\t\tthat.steps = [];\r\n\t\t\t\tthat._pos(x, y);\r\n\t\t\t\tif (that.options.onScrollEnd) that.options.onScrollEnd.call(that);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthat.absStartX = that.x;\t// Needed by snap threshold\r\n\t\tthat.absStartY = that.y;\r\n\r\n\t\tthat.startX = that.x;\r\n\t\tthat.startY = that.y;\r\n\t\tthat.pointX = point.pageX;\r\n\t\tthat.pointY = point.pageY;\r\n\r\n\t\tthat.startTime = e.timeStamp || Date.now();\r\n\r\n\t\tif (that.options.onScrollStart) that.options.onScrollStart.call(that, e);\r\n\r\n\t\tthat._bind(MOVE_EV, window);\r\n\t\tthat._bind(END_EV, window);\r\n\t\tthat._bind(CANCEL_EV, window);\r\n\t},\r\n\t\r\n\t_move: function (e) {\r\n\t\tvar that = this,\r\n\t\t\tpoint = hasTouch ? e.touches[0] : e,\r\n\t\t\tdeltaX = point.pageX - that.pointX,\r\n\t\t\tdeltaY = point.pageY - that.pointY,\r\n\t\t\tnewX = that.x + deltaX,\r\n\t\t\tnewY = that.y + deltaY,\r\n\t\t\tc1, c2, scale,\r\n\t\t\ttimestamp = e.timeStamp || Date.now();\r\n\r\n\t\tif (that.options.onBeforeScrollMove) that.options.onBeforeScrollMove.call(that, e);\r\n\r\n\t\t// Zoom\r\n\t\tif (that.options.zoom && hasTouch && e.touches.length > 1) {\r\n\t\t\tc1 = m.abs(e.touches[0].pageX - e.touches[1].pageX);\r\n\t\t\tc2 = m.abs(e.touches[0].pageY - e.touches[1].pageY);\r\n\t\t\tthat.touchesDist = m.sqrt(c1*c1+c2*c2);\r\n\r\n\t\t\tthat.zoomed = true;\r\n\r\n\t\t\tscale = 1 / that.touchesDistStart * that.touchesDist * this.scale;\r\n\r\n\t\t\tif (scale < that.options.zoomMin) scale = 0.5 * that.options.zoomMin * Math.pow(2.0, scale / that.options.zoomMin);\r\n\t\t\telse if (scale > that.options.zoomMax) scale = 2.0 * that.options.zoomMax * Math.pow(0.5, that.options.zoomMax / scale);\r\n\r\n\t\t\tthat.lastScale = scale / this.scale;\r\n\r\n\t\t\tnewX = this.originX - this.originX * that.lastScale + this.x;\r\n\t\t\tnewY = this.originY - this.originY * that.lastScale + this.y;\r\n\r\n\t\t\tthis.scroller.style[transform] = 'translate(' + newX + 'px,' + newY + 'px) scale(' + scale + ')' + translateZ;\r\n\r\n\t\t\tif (that.options.onZoom) that.options.onZoom.call(that, e);\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tthat.pointX = point.pageX;\r\n\t\tthat.pointY = point.pageY;\r\n\r\n\t\t// Slow down if outside of the boundaries\r\n\t\tif (newX > 0 || newX < that.maxScrollX) {\r\n\t\t\tnewX = that.options.bounce ? that.x + (deltaX / 2) : newX >= 0 || that.maxScrollX >= 0 ? 0 : that.maxScrollX;\r\n\t\t}\r\n\t\tif (newY > that.minScrollY || newY < that.maxScrollY) {\r\n\t\t\tnewY = that.options.bounce ? that.y + (deltaY / 2) : newY >= that.minScrollY || that.maxScrollY >= 0 ? that.minScrollY : that.maxScrollY;\r\n\t\t}\r\n\r\n\t\tthat.distX += deltaX;\r\n\t\tthat.distY += deltaY;\r\n\t\tthat.absDistX = m.abs(that.distX);\r\n\t\tthat.absDistY = m.abs(that.distY);\r\n\r\n\t\tif (that.absDistX < 6 && that.absDistY < 6) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t// Lock direction\r\n\t\tif (that.options.lockDirection) {\r\n\t\t\tif (that.absDistX > that.absDistY + 5) {\r\n\t\t\t\tnewY = that.y;\r\n\t\t\t\tdeltaY = 0;\r\n\t\t\t} else if (that.absDistY > that.absDistX + 5) {\r\n\t\t\t\tnewX = that.x;\r\n\t\t\t\tdeltaX = 0;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthat.moved = true;\r\n\t\tthat._pos(newX, newY);\r\n\t\tthat.dirX = deltaX > 0 ? -1 : deltaX < 0 ? 1 : 0;\r\n\t\tthat.dirY = deltaY > 0 ? -1 : deltaY < 0 ? 1 : 0;\r\n\r\n\t\tif (timestamp - that.startTime > 300) {\r\n\t\t\tthat.startTime = timestamp;\r\n\t\t\tthat.startX = that.x;\r\n\t\t\tthat.startY = that.y;\r\n\t\t}\r\n\t\t\r\n\t\tif (that.options.onScrollMove) that.options.onScrollMove.call(that, e);\r\n\t},\r\n\t\r\n\t_end: function (e) {\r\n\t\tif (hasTouch && e.touches.length !== 0) return;\r\n\r\n\t\tvar that = this,\r\n\t\t\tpoint = hasTouch ? e.changedTouches[0] : e,\r\n\t\t\ttarget, ev,\r\n\t\t\tmomentumX = { dist:0, time:0 },\r\n\t\t\tmomentumY = { dist:0, time:0 },\r\n\t\t\tduration = (e.timeStamp || Date.now()) - that.startTime,\r\n\t\t\tnewPosX = that.x,\r\n\t\t\tnewPosY = that.y,\r\n\t\t\tdistX, distY,\r\n\t\t\tnewDuration,\r\n\t\t\tsnap,\r\n\t\t\tscale;\r\n\r\n\t\tthat._unbind(MOVE_EV, window);\r\n\t\tthat._unbind(END_EV, window);\r\n\t\tthat._unbind(CANCEL_EV, window);\r\n\r\n\t\tif (that.options.onBeforeScrollEnd) that.options.onBeforeScrollEnd.call(that, e);\r\n\r\n\t\tif (that.zoomed) {\r\n\t\t\tscale = that.scale * that.lastScale;\r\n\t\t\tscale = Math.max(that.options.zoomMin, scale);\r\n\t\t\tscale = Math.min(that.options.zoomMax, scale);\r\n\t\t\tthat.lastScale = scale / that.scale;\r\n\t\t\tthat.scale = scale;\r\n\r\n\t\t\tthat.x = that.originX - that.originX * that.lastScale + that.x;\r\n\t\t\tthat.y = that.originY - that.originY * that.lastScale + that.y;\r\n\t\t\t\r\n\t\t\tthat.scroller.style[transitionDuration] = '200ms';\r\n\t\t\tthat.scroller.style[transform] = 'translate(' + that.x + 'px,' + that.y + 'px) scale(' + that.scale + ')' + translateZ;\r\n\t\t\t\r\n\t\t\tthat.zoomed = false;\r\n\t\t\tthat.refresh();\r\n\r\n\t\t\tif (that.options.onZoomEnd) that.options.onZoomEnd.call(that, e);\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tif (!that.moved) {\r\n\t\t\tif (hasTouch) {\r\n\t\t\t\tif (that.doubleTapTimer && that.options.zoom) {\r\n\t\t\t\t\t// Double tapped\r\n\t\t\t\t\tclearTimeout(that.doubleTapTimer);\r\n\t\t\t\t\tthat.doubleTapTimer = null;\r\n\t\t\t\t\tif (that.options.onZoomStart) that.options.onZoomStart.call(that, e);\r\n\t\t\t\t\tthat.zoom(that.pointX, that.pointY, that.scale == 1 ? that.options.doubleTapZoom : 1);\r\n\t\t\t\t\tif (that.options.onZoomEnd) {\r\n\t\t\t\t\t\tsetTimeout(function() {\r\n\t\t\t\t\t\t\tthat.options.onZoomEnd.call(that, e);\r\n\t\t\t\t\t\t}, 200); // 200 is default zoom duration\r\n\t\t\t\t\t}\r\n\t\t\t\t} else if (this.options.handleClick) {\r\n\t\t\t\t\tthat.doubleTapTimer = setTimeout(function () {\r\n\t\t\t\t\t\tthat.doubleTapTimer = null;\r\n\r\n\t\t\t\t\t\t// Find the last touched element\r\n\t\t\t\t\t\ttarget = point.target;\r\n\t\t\t\t\t\twhile (target.nodeType != 1) target = target.parentNode;\r\n\r\n\t\t\t\t\t\tif (target.tagName != 'SELECT' && target.tagName != 'INPUT' && target.tagName != 'TEXTAREA') {\r\n\t\t\t\t\t\t\tev = doc.createEvent('MouseEvents');\r\n\t\t\t\t\t\t\tev.initMouseEvent('click', true, true, e.view, 1,\r\n\t\t\t\t\t\t\t\tpoint.screenX, point.screenY, point.clientX, point.clientY,\r\n\t\t\t\t\t\t\t\te.ctrlKey, e.altKey, e.shiftKey, e.metaKey,\r\n\t\t\t\t\t\t\t\t0, null);\r\n\t\t\t\t\t\t\tev._fake = true;\r\n\t\t\t\t\t\t\ttarget.dispatchEvent(ev);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}, that.options.zoom ? 250 : 0);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tthat._resetPos(400);\r\n\r\n\t\t\tif (that.options.onTouchEnd) that.options.onTouchEnd.call(that, e);\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tif (duration < 300 && that.options.momentum) {\r\n\t\t\tmomentumX = newPosX ? that._momentum(newPosX - that.startX, duration, -that.x, that.scrollerW - that.wrapperW + that.x, that.options.bounce ? that.wrapperW : 0) : momentumX;\r\n\t\t\tmomentumY = newPosY ? that._momentum(newPosY - that.startY, duration, -that.y, (that.maxScrollY < 0 ? that.scrollerH - that.wrapperH + that.y - that.minScrollY : 0), that.options.bounce ? that.wrapperH : 0) : momentumY;\r\n\r\n\t\t\tnewPosX = that.x + momentumX.dist;\r\n\t\t\tnewPosY = that.y + momentumY.dist;\r\n\r\n\t\t\tif ((that.x > 0 && newPosX > 0) || (that.x < that.maxScrollX && newPosX < that.maxScrollX)) momentumX = { dist:0, time:0 };\r\n\t\t\tif ((that.y > that.minScrollY && newPosY > that.minScrollY) || (that.y < that.maxScrollY && newPosY < that.maxScrollY)) momentumY = { dist:0, time:0 };\r\n\t\t}\r\n\r\n\t\tif (momentumX.dist || momentumY.dist) {\r\n\t\t\tnewDuration = m.max(m.max(momentumX.time, momentumY.time), 10);\r\n\r\n\t\t\t// Do we need to snap?\r\n\t\t\tif (that.options.snap) {\r\n\t\t\t\tdistX = newPosX - that.absStartX;\r\n\t\t\t\tdistY = newPosY - that.absStartY;\r\n\t\t\t\tif (m.abs(distX) < that.options.snapThreshold && m.abs(distY) < that.options.snapThreshold) { that.scrollTo(that.absStartX, that.absStartY, 200); }\r\n\t\t\t\telse {\r\n\t\t\t\t\tsnap = that._snap(newPosX, newPosY);\r\n\t\t\t\t\tnewPosX = snap.x;\r\n\t\t\t\t\tnewPosY = snap.y;\r\n\t\t\t\t\tnewDuration = m.max(snap.time, newDuration);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tthat.scrollTo(m.round(newPosX), m.round(newPosY), newDuration);\r\n\r\n\t\t\tif (that.options.onTouchEnd) that.options.onTouchEnd.call(that, e);\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t// Do we need to snap?\r\n\t\tif (that.options.snap) {\r\n\t\t\tdistX = newPosX - that.absStartX;\r\n\t\t\tdistY = newPosY - that.absStartY;\r\n\t\t\tif (m.abs(distX) < that.options.snapThreshold && m.abs(distY) < that.options.snapThreshold) that.scrollTo(that.absStartX, that.absStartY, 200);\r\n\t\t\telse {\r\n\t\t\t\tsnap = that._snap(that.x, that.y);\r\n\t\t\t\tif (snap.x != that.x || snap.y != that.y) that.scrollTo(snap.x, snap.y, snap.time);\r\n\t\t\t}\r\n\r\n\t\t\tif (that.options.onTouchEnd) that.options.onTouchEnd.call(that, e);\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tthat._resetPos(200);\r\n\t\tif (that.options.onTouchEnd) that.options.onTouchEnd.call(that, e);\r\n\t},\r\n\t\r\n\t_resetPos: function (time) {\r\n\t\tvar that = this,\r\n\t\t\tresetX = that.x >= 0 ? 0 : that.x < that.maxScrollX ? that.maxScrollX : that.x,\r\n\t\t\tresetY = that.y >= that.minScrollY || that.maxScrollY > 0 ? that.minScrollY : that.y < that.maxScrollY ? that.maxScrollY : that.y;\r\n\r\n\t\tif (resetX == that.x && resetY == that.y) {\r\n\t\t\tif (that.moved) {\r\n\t\t\t\tthat.moved = false;\r\n\t\t\t\tif (that.options.onScrollEnd) that.options.onScrollEnd.call(that);\t\t// Execute custom code on scroll end\r\n\t\t\t}\r\n\r\n\t\t\tif (that.hScrollbar && that.options.hideScrollbar) {\r\n\t\t\t\tif (vendor == 'webkit') that.hScrollbarWrapper.style[transitionDelay] = '300ms';\r\n\t\t\t\tthat.hScrollbarWrapper.style.opacity = '0';\r\n\t\t\t}\r\n\t\t\tif (that.vScrollbar && that.options.hideScrollbar) {\r\n\t\t\t\tif (vendor == 'webkit') that.vScrollbarWrapper.style[transitionDelay] = '300ms';\r\n\t\t\t\tthat.vScrollbarWrapper.style.opacity = '0';\r\n\t\t\t}\r\n\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tthat.scrollTo(resetX, resetY, time || 0);\r\n\t},\r\n\r\n\t_wheel: function (e) {\r\n\t\tvar that = this,\r\n\t\t\twheelDeltaX, wheelDeltaY,\r\n\t\t\tdeltaX, deltaY,\r\n\t\t\tdeltaScale;\r\n\r\n\t\tif ('wheelDeltaX' in e) {\r\n\t\t\twheelDeltaX = e.wheelDeltaX / 12;\r\n\t\t\twheelDeltaY = e.wheelDeltaY / 12;\r\n\t\t} else if('wheelDelta' in e) {\r\n\t\t\twheelDeltaX = wheelDeltaY = e.wheelDelta / 12;\r\n\t\t} else if ('detail' in e) {\r\n\t\t\twheelDeltaX = wheelDeltaY = -e.detail * 3;\r\n\t\t} else {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\t\r\n\t\tif (that.options.wheelAction == 'zoom') {\r\n\t\t\tdeltaScale = that.scale * Math.pow(2, 1/3 * (wheelDeltaY ? wheelDeltaY / Math.abs(wheelDeltaY) : 0));\r\n\t\t\tif (deltaScale < that.options.zoomMin) deltaScale = that.options.zoomMin;\r\n\t\t\tif (deltaScale > that.options.zoomMax) deltaScale = that.options.zoomMax;\r\n\t\t\t\r\n\t\t\tif (deltaScale != that.scale) {\r\n\t\t\t\tif (!that.wheelZoomCount && that.options.onZoomStart) that.options.onZoomStart.call(that, e);\r\n\t\t\t\tthat.wheelZoomCount++;\r\n\t\t\t\t\r\n\t\t\t\tthat.zoom(e.pageX, e.pageY, deltaScale, 400);\r\n\t\t\t\t\r\n\t\t\t\tsetTimeout(function() {\r\n\t\t\t\t\tthat.wheelZoomCount--;\r\n\t\t\t\t\tif (!that.wheelZoomCount && that.options.onZoomEnd) that.options.onZoomEnd.call(that, e);\r\n\t\t\t\t}, 400);\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\treturn;\r\n\t\t}\r\n\t\t\r\n\t\tdeltaX = that.x + wheelDeltaX;\r\n\t\tdeltaY = that.y + wheelDeltaY;\r\n\r\n\t\tif (deltaX > 0) deltaX = 0;\r\n\t\telse if (deltaX < that.maxScrollX) deltaX = that.maxScrollX;\r\n\r\n\t\tif (deltaY > that.minScrollY) deltaY = that.minScrollY;\r\n\t\telse if (deltaY < that.maxScrollY) deltaY = that.maxScrollY;\r\n    \r\n\t\tif (that.maxScrollY < 0) {\r\n\t\t\tthat.scrollTo(deltaX, deltaY, 0);\r\n\t\t}\r\n\t},\r\n\t\r\n\t_transitionEnd: function (e) {\r\n\t\tvar that = this;\r\n\r\n\t\tif (e.target != that.scroller) return;\r\n\r\n\t\tthat._unbind(TRNEND_EV);\r\n\t\t\r\n\t\tthat._startAni();\r\n\t},\r\n\r\n\r\n\t/**\r\n\t*\r\n\t* Utilities\r\n\t*\r\n\t*/\r\n\t_startAni: function () {\r\n\t\tvar that = this,\r\n\t\t\tstartX = that.x, startY = that.y,\r\n\t\t\tstartTime = Date.now(),\r\n\t\t\tstep, easeOut,\r\n\t\t\tanimate;\r\n\r\n\t\tif (that.animating) return;\r\n\t\t\r\n\t\tif (!that.steps.length) {\r\n\t\t\tthat._resetPos(400);\r\n\t\t\treturn;\r\n\t\t}\r\n\t\t\r\n\t\tstep = that.steps.shift();\r\n\t\t\r\n\t\tif (step.x == startX && step.y == startY) step.time = 0;\r\n\r\n\t\tthat.animating = true;\r\n\t\tthat.moved = true;\r\n\t\t\r\n\t\tif (that.options.useTransition) {\r\n\t\t\tthat._transitionTime(step.time);\r\n\t\t\tthat._pos(step.x, step.y);\r\n\t\t\tthat.animating = false;\r\n\t\t\tif (step.time) that._bind(TRNEND_EV);\r\n\t\t\telse that._resetPos(0);\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tanimate = function () {\r\n\t\t\tvar now = Date.now(),\r\n\t\t\t\tnewX, newY;\r\n\r\n\t\t\tif (now >= startTime + step.time) {\r\n\t\t\t\tthat._pos(step.x, step.y);\r\n\t\t\t\tthat.animating = false;\r\n\t\t\t\tif (that.options.onAnimationEnd) that.options.onAnimationEnd.call(that);\t\t\t// Execute custom code on animation end\r\n\t\t\t\tthat._startAni();\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tnow = (now - startTime) / step.time - 1;\r\n\t\t\teaseOut = m.sqrt(1 - now * now);\r\n\t\t\tnewX = (step.x - startX) * easeOut + startX;\r\n\t\t\tnewY = (step.y - startY) * easeOut + startY;\r\n\t\t\tthat._pos(newX, newY);\r\n\t\t\tif (that.animating) that.aniTime = nextFrame(animate);\r\n\t\t};\r\n\r\n\t\tanimate();\r\n\t},\r\n\r\n\t_transitionTime: function (time) {\r\n\t\ttime += 'ms';\r\n\t\tthis.scroller.style[transitionDuration] = time;\r\n\t\tif (this.hScrollbar) this.hScrollbarIndicator.style[transitionDuration] = time;\r\n\t\tif (this.vScrollbar) this.vScrollbarIndicator.style[transitionDuration] = time;\r\n\t},\r\n\r\n\t_momentum: function (dist, time, maxDistUpper, maxDistLower, size) {\r\n\t\tvar deceleration = 0.0006,\r\n\t\t\tspeed = m.abs(dist) / time,\r\n\t\t\tnewDist = (speed * speed) / (2 * deceleration),\r\n\t\t\tnewTime = 0, outsideDist = 0;\r\n\r\n\t\t// Proportinally reduce speed if we are outside of the boundaries\r\n\t\tif (dist > 0 && newDist > maxDistUpper) {\r\n\t\t\toutsideDist = size / (6 / (newDist / speed * deceleration));\r\n\t\t\tmaxDistUpper = maxDistUpper + outsideDist;\r\n\t\t\tspeed = speed * maxDistUpper / newDist;\r\n\t\t\tnewDist = maxDistUpper;\r\n\t\t} else if (dist < 0 && newDist > maxDistLower) {\r\n\t\t\toutsideDist = size / (6 / (newDist / speed * deceleration));\r\n\t\t\tmaxDistLower = maxDistLower + outsideDist;\r\n\t\t\tspeed = speed * maxDistLower / newDist;\r\n\t\t\tnewDist = maxDistLower;\r\n\t\t}\r\n\r\n\t\tnewDist = newDist * (dist < 0 ? -1 : 1);\r\n\t\tnewTime = speed / deceleration;\r\n\r\n\t\treturn { dist: newDist, time: m.round(newTime) };\r\n\t},\r\n\r\n\t_offset: function (el) {\r\n\t\tvar left = -el.offsetLeft,\r\n\t\t\ttop = -el.offsetTop;\r\n\t\t\t\r\n\t\twhile (el = el.offsetParent) {\r\n\t\t\tleft -= el.offsetLeft;\r\n\t\t\ttop -= el.offsetTop;\r\n\t\t}\r\n\t\t\r\n\t\tif (el != this.wrapper) {\r\n\t\t\tleft *= this.scale;\r\n\t\t\ttop *= this.scale;\r\n\t\t}\r\n\r\n\t\treturn { left: left, top: top };\r\n\t},\r\n\r\n\t_snap: function (x, y) {\r\n\t\tvar that = this,\r\n\t\t\ti, l,\r\n\t\t\tpage, time,\r\n\t\t\tsizeX, sizeY;\r\n\r\n\t\t// Check page X\r\n\t\tpage = that.pagesX.length - 1;\r\n\t\tfor (i=0, l=that.pagesX.length; i<l; i++) {\r\n\t\t\tif (x >= that.pagesX[i]) {\r\n\t\t\t\tpage = i;\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (page == that.currPageX && page > 0 && that.dirX < 0) page--;\r\n\t\tx = that.pagesX[page];\r\n\t\tsizeX = m.abs(x - that.pagesX[that.currPageX]);\r\n\t\tsizeX = sizeX ? m.abs(that.x - x) / sizeX * 500 : 0;\r\n\t\tthat.currPageX = page;\r\n\r\n\t\t// Check page Y\r\n\t\tpage = that.pagesY.length-1;\r\n\t\tfor (i=0; i<page; i++) {\r\n\t\t\tif (y >= that.pagesY[i]) {\r\n\t\t\t\tpage = i;\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (page == that.currPageY && page > 0 && that.dirY < 0) page--;\r\n\t\ty = that.pagesY[page];\r\n\t\tsizeY = m.abs(y - that.pagesY[that.currPageY]);\r\n\t\tsizeY = sizeY ? m.abs(that.y - y) / sizeY * 500 : 0;\r\n\t\tthat.currPageY = page;\r\n\r\n\t\t// Snap with constant speed (proportional duration)\r\n\t\ttime = m.round(m.max(sizeX, sizeY)) || 200;\r\n\r\n\t\treturn { x: x, y: y, time: time };\r\n\t},\r\n\r\n\t_bind: function (type, el, bubble) {\r\n\t\t(el || this.scroller).addEventListener(type, this, !!bubble);\r\n\t},\r\n\r\n\t_unbind: function (type, el, bubble) {\r\n\t\t(el || this.scroller).removeEventListener(type, this, !!bubble);\r\n\t},\r\n\r\n\r\n\t/**\r\n\t*\r\n\t* Public methods\r\n\t*\r\n\t*/\r\n\tdestroy: function () {\r\n\t\tvar that = this;\r\n\r\n\t\tthat.scroller.style[transform] = '';\r\n\r\n\t\t// Remove the scrollbars\r\n\t\tthat.hScrollbar = false;\r\n\t\tthat.vScrollbar = false;\r\n\t\tthat._scrollbar('h');\r\n\t\tthat._scrollbar('v');\r\n\r\n\t\t// Remove the event listeners\r\n\t\tthat._unbind(RESIZE_EV, window);\r\n\t\tthat._unbind(START_EV);\r\n\t\tthat._unbind(MOVE_EV, window);\r\n\t\tthat._unbind(END_EV, window);\r\n\t\tthat._unbind(CANCEL_EV, window);\r\n\t\t\r\n\t\tif (!that.options.hasTouch) {\r\n\t\t\tthat._unbind('DOMMouseScroll');\r\n\t\t\tthat._unbind('mousewheel');\r\n\t\t}\r\n\t\t\r\n\t\tif (that.options.useTransition) that._unbind(TRNEND_EV);\r\n\t\t\r\n\t\tif (that.options.checkDOMChanges) clearInterval(that.checkDOMTime);\r\n\t\t\r\n\t\tif (that.options.onDestroy) that.options.onDestroy.call(that);\r\n\t},\r\n\r\n\trefresh: function () {\r\n\t\tvar that = this,\r\n\t\t\toffset,\r\n\t\t\ti, l,\r\n\t\t\tels,\r\n\t\t\tpos = 0,\r\n\t\t\tpage = 0;\r\n\r\n\t\tif (that.scale < that.options.zoomMin) that.scale = that.options.zoomMin;\r\n\t\tthat.wrapperW = that.wrapper.clientWidth || 1;\r\n\t\tthat.wrapperH = that.wrapper.clientHeight || 1;\r\n\r\n\t\tthat.minScrollY = -that.options.topOffset || 0;\r\n\t\tthat.scrollerW = m.round(that.scroller.offsetWidth * that.scale);\r\n\t\tthat.scrollerH = m.round((that.scroller.offsetHeight + that.minScrollY) * that.scale);\r\n\t\tthat.maxScrollX = that.wrapperW - that.scrollerW;\r\n\t\tthat.maxScrollY = that.wrapperH - that.scrollerH + that.minScrollY;\r\n\t\tthat.dirX = 0;\r\n\t\tthat.dirY = 0;\r\n\r\n\t\tif (that.options.onRefresh) that.options.onRefresh.call(that);\r\n\r\n\t\tthat.hScroll = that.options.hScroll && that.maxScrollX < 0;\r\n\t\tthat.vScroll = that.options.vScroll && (!that.options.bounceLock && !that.hScroll || that.scrollerH > that.wrapperH);\r\n\r\n\t\tthat.hScrollbar = that.hScroll && that.options.hScrollbar;\r\n\t\tthat.vScrollbar = that.vScroll && that.options.vScrollbar && that.scrollerH > that.wrapperH;\r\n\r\n\t\toffset = that._offset(that.wrapper);\r\n\t\tthat.wrapperOffsetLeft = -offset.left;\r\n\t\tthat.wrapperOffsetTop = -offset.top;\r\n\r\n\t\t// Prepare snap\r\n\t\tif (typeof that.options.snap == 'string') {\r\n\t\t\tthat.pagesX = [];\r\n\t\t\tthat.pagesY = [];\r\n\t\t\tels = that.scroller.querySelectorAll(that.options.snap);\r\n\t\t\tfor (i=0, l=els.length; i<l; i++) {\r\n\t\t\t\tpos = that._offset(els[i]);\r\n\t\t\t\tpos.left += that.wrapperOffsetLeft;\r\n\t\t\t\tpos.top += that.wrapperOffsetTop;\r\n\t\t\t\tthat.pagesX[i] = pos.left < that.maxScrollX ? that.maxScrollX : pos.left * that.scale;\r\n\t\t\t\tthat.pagesY[i] = pos.top < that.maxScrollY ? that.maxScrollY : pos.top * that.scale;\r\n\t\t\t}\r\n\t\t} else if (that.options.snap) {\r\n\t\t\tthat.pagesX = [];\r\n\t\t\twhile (pos >= that.maxScrollX) {\r\n\t\t\t\tthat.pagesX[page] = pos;\r\n\t\t\t\tpos = pos - that.wrapperW;\r\n\t\t\t\tpage++;\r\n\t\t\t}\r\n\t\t\tif (that.maxScrollX%that.wrapperW) that.pagesX[that.pagesX.length] = that.maxScrollX - that.pagesX[that.pagesX.length-1] + that.pagesX[that.pagesX.length-1];\r\n\r\n\t\t\tpos = 0;\r\n\t\t\tpage = 0;\r\n\t\t\tthat.pagesY = [];\r\n\t\t\twhile (pos >= that.maxScrollY) {\r\n\t\t\t\tthat.pagesY[page] = pos;\r\n\t\t\t\tpos = pos - that.wrapperH;\r\n\t\t\t\tpage++;\r\n\t\t\t}\r\n\t\t\tif (that.maxScrollY%that.wrapperH) that.pagesY[that.pagesY.length] = that.maxScrollY - that.pagesY[that.pagesY.length-1] + that.pagesY[that.pagesY.length-1];\r\n\t\t}\r\n\r\n\t\t// Prepare the scrollbars\r\n\t\tthat._scrollbar('h');\r\n\t\tthat._scrollbar('v');\r\n\r\n\t\tif (!that.zoomed) {\r\n\t\t\tthat.scroller.style[transitionDuration] = '0';\r\n\t\t\tthat._resetPos(400);\r\n\t\t}\r\n\t},\r\n\r\n\tscrollTo: function (x, y, time, relative) {\r\n\t\tvar that = this,\r\n\t\t\tstep = x,\r\n\t\t\ti, l;\r\n\r\n\t\tthat.stop();\r\n\r\n\t\tif (!step.length) step = [{ x: x, y: y, time: time, relative: relative }];\r\n\t\t\r\n\t\tfor (i=0, l=step.length; i<l; i++) {\r\n\t\t\tif (step[i].relative) { step[i].x = that.x - step[i].x; step[i].y = that.y - step[i].y; }\r\n\t\t\tthat.steps.push({ x: step[i].x, y: step[i].y, time: step[i].time || 0 });\r\n\t\t}\r\n\r\n\t\tthat._startAni();\r\n\t},\r\n\r\n\tscrollToElement: function (el, time) {\r\n\t\tvar that = this, pos;\r\n\t\tel = el.nodeType ? el : that.scroller.querySelector(el);\r\n\t\tif (!el) return;\r\n\r\n\t\tpos = that._offset(el);\r\n\t\tpos.left += that.wrapperOffsetLeft;\r\n\t\tpos.top += that.wrapperOffsetTop;\r\n\r\n\t\tpos.left = pos.left > 0 ? 0 : pos.left < that.maxScrollX ? that.maxScrollX : pos.left;\r\n\t\tpos.top = pos.top > that.minScrollY ? that.minScrollY : pos.top < that.maxScrollY ? that.maxScrollY : pos.top;\r\n\t\ttime = time === undefined ? m.max(m.abs(pos.left)*2, m.abs(pos.top)*2) : time;\r\n\r\n\t\tthat.scrollTo(pos.left, pos.top, time);\r\n\t},\r\n\r\n\tscrollToPage: function (pageX, pageY, time) {\r\n\t\tvar that = this, x, y;\r\n\t\t\r\n\t\ttime = time === undefined ? 400 : time;\r\n\r\n\t\tif (that.options.onScrollStart) that.options.onScrollStart.call(that);\r\n\r\n\t\tif (that.options.snap) {\r\n\t\t\tpageX = pageX == 'next' ? that.currPageX+1 : pageX == 'prev' ? that.currPageX-1 : pageX;\r\n\t\t\tpageY = pageY == 'next' ? that.currPageY+1 : pageY == 'prev' ? that.currPageY-1 : pageY;\r\n\r\n\t\t\tpageX = pageX < 0 ? 0 : pageX > that.pagesX.length-1 ? that.pagesX.length-1 : pageX;\r\n\t\t\tpageY = pageY < 0 ? 0 : pageY > that.pagesY.length-1 ? that.pagesY.length-1 : pageY;\r\n\r\n\t\t\tthat.currPageX = pageX;\r\n\t\t\tthat.currPageY = pageY;\r\n\t\t\tx = that.pagesX[pageX];\r\n\t\t\ty = that.pagesY[pageY];\r\n\t\t} else {\r\n\t\t\tx = -that.wrapperW * pageX;\r\n\t\t\ty = -that.wrapperH * pageY;\r\n\t\t\tif (x < that.maxScrollX) x = that.maxScrollX;\r\n\t\t\tif (y < that.maxScrollY) y = that.maxScrollY;\r\n\t\t}\r\n\r\n\t\tthat.scrollTo(x, y, time);\r\n\t},\r\n\r\n\tdisable: function () {\r\n\t\tthis.stop();\r\n\t\tthis._resetPos(0);\r\n\t\tthis.enabled = false;\r\n\r\n\t\t// If disabled after touchstart we make sure that there are no left over events\r\n\t\tthis._unbind(MOVE_EV, window);\r\n\t\tthis._unbind(END_EV, window);\r\n\t\tthis._unbind(CANCEL_EV, window);\r\n\t},\r\n\t\r\n\tenable: function () {\r\n\t\tthis.enabled = true;\r\n\t},\r\n\t\r\n\tstop: function () {\r\n\t\tif (this.options.useTransition) this._unbind(TRNEND_EV);\r\n\t\telse cancelFrame(this.aniTime);\r\n\t\tthis.steps = [];\r\n\t\tthis.moved = false;\r\n\t\tthis.animating = false;\r\n\t},\r\n\t\r\n\tzoom: function (x, y, scale, time) {\r\n\t\tvar that = this,\r\n\t\t\trelScale = scale / that.scale;\r\n\r\n\t\tif (!that.options.useTransform) return;\r\n\r\n\t\tthat.zoomed = true;\r\n\t\ttime = time === undefined ? 200 : time;\r\n\t\tx = x - that.wrapperOffsetLeft - that.x;\r\n\t\ty = y - that.wrapperOffsetTop - that.y;\r\n\t\tthat.x = x - x * relScale + that.x;\r\n\t\tthat.y = y - y * relScale + that.y;\r\n\r\n\t\tthat.scale = scale;\r\n\t\tthat.refresh();\r\n\r\n\t\tthat.x = that.x > 0 ? 0 : that.x < that.maxScrollX ? that.maxScrollX : that.x;\r\n\t\tthat.y = that.y > that.minScrollY ? that.minScrollY : that.y < that.maxScrollY ? that.maxScrollY : that.y;\r\n\r\n\t\tthat.scroller.style[transitionDuration] = time + 'ms';\r\n\t\tthat.scroller.style[transform] = 'translate(' + that.x + 'px,' + that.y + 'px) scale(' + scale + ')' + translateZ;\r\n\t\tthat.zoomed = false;\r\n\t},\r\n\t\r\n\tisReady: function () {\r\n\t\treturn !this.moved && !this.zoomed && !this.animating;\r\n\t}\r\n};\r\n\r\nfunction prefixStyle (style) {\r\n\tif ( vendor === '' ) return style;\r\n\r\n\tstyle = style.charAt(0).toUpperCase() + style.substr(1);\r\n\treturn vendor + style;\r\n}\r\n\r\ndummyStyle = null;\t// for the sake of it\r\n\r\nif (typeof exports !== 'undefined') exports.iScroll = iScroll;\r\nelse window.iScroll = iScroll;\r\n\r\n})(window, document);\r\n"]}