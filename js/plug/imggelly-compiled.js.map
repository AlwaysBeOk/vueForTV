{"version":3,"sources":["imggelly.js"],"names":[],"mappings":"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","file":"imggelly-compiled.js","sourcesContent":["// JavaScript Document\r\n//window.mySwipe 注意：为全局函数   \r\nvar GellyClass=(function(){\r\n\r\n\r\n\tvar ImageGelly=function(param){\r\n\t\tthis.init(param);\r\n\t};\r\n\tImageGelly.hasboxbind=false; //用于标记是否已添加window.resize函数\r\n\tImageGelly.scolltop=0;  //记录滚动条的高度\r\n\tImageGelly.prototype={\r\n\t\tinit:function(param){\r\n\t\t\tthis.parentstr=param.id;\r\n\t\t\tthis.bottomele=param.bottomdiv;\r\n\t\t\tthis.imgs=[];\r\n\t\t\tthis.index=param.index||0;\r\n\t\t\tthis.createitemHtml(param.imgs);\r\n\t\t\tthis.addslide(param.id);\r\n\t\t\tthis.aglinimg();\r\n\t\t\tthis.bindfuc();\r\n\t\t},\r\n\t\taddslide:function(parentid){\r\n\t\t\tvar index=this.index;\r\n\t\t\tvar height=$(window).height();\r\n\t\t\tvar width=$(window).width();\r\n\t\t\t$(\".swipe-wrap > div\").height(height);\r\n\t\t\tvar elem = document.getElementById(parentid);\r\n\t\t\t//console.log(elem);\r\n\t\t\tif(window.mySwipe){\r\n\t\t\t\twindow.mySwipe=null;\r\n\t\t\t}\r\n\t\t\twindow.mySwipe =new Swipe(elem, {\r\n\t\t\t\tstartSlide: index,\r\n\t\t\t\t// auto: 3000,\r\n\t\t\t\tcontinuous: false,\r\n\t\t\t\t// disableScroll: true,\r\n\t\t\t\t// stopPropagation: true,\r\n\t\t\t\t// callback: function(index, element) {},\r\n\t\t\t\t// transitionEnd: function(index, element) {}\r\n\t\t\t});\r\n\t\t},\r\n\t\taglinimg:function(){\r\n\t\t\tvar imgarr=$(\"#\"+this.parentstr+\" img.fullscreen\");\r\n\t\t\tvar self=this;\r\n\t\t\tfor(var i=0, len=imgarr.length; i<len; i++){\r\n\t\t\t\tvar imgdom=imgarr.eq(i);\r\n\t\t\t\t(function(dom){\r\n\t\t\t\t\tvar img=new Image();\r\n\t\t\t\t\timg.onload=function(){\r\n\t\t\t\t\t\t//console.log(this.width);\r\n\t\t\t\t\t\t//此处可对图片进行调整\r\n\t\t\t\t\t\tdom.attr('maxwidth',this.width);\r\n\t\t\t\t\t}\r\n\t\t\t\t\timg.src=dom.attr(\"src\");\r\n\t\t\t\t\tself.imgs.push(dom.attr(\"src\"));\r\n\t\t\t\t})(imgdom);\r\n\t\t\t}\r\n\t\t},\r\n\t\tcreateitemHtml:function(arr){\r\n\t\t\tvar str='<div class=\"swipe-wrap\">';\r\n\t\t\tfor(var i=0,len=arr.length; i<len; i++){\r\n\t\t\t\tstr+='<div><img class=\"fullscreen\" src=\"'+arr[i]+'\"></div>';\r\n\t\t\t}\r\n\t\t\tstr+='</div>';\r\n\t\t\t$(\"#\"+this.parentstr).html(str);\r\n\t\t},\r\n\t\tbindfuc:function(){\r\n\t\t\tvar self=this;\r\n\t\t\tvar parentdom=$(\"#\"+this.parentstr);\r\n\t\t\tparentdom.unbind('click');\r\n\t\t\tparentdom.click(function(){\r\n\t\t\t\t$(this).hide();\r\n\t\t\t\tself.bottomele.css({display:'block'});\r\n\t\t\t\t$(\"body\").scrollTop(ImageGelly.scolltop);\r\n\t\t\t});\r\n\t\t\tif(!ImageGelly.hasboxbind){\r\n\t\t\t\t$(window).resize(function(){\r\n\t\t\t\t\tvar height=$(window).height();\r\n\t\t\t\t\tvar width=$(window).width();\r\n\t\t\t\t\tparentdom.css({height:height,width:width});\r\n\t\t\t\t\tvar imgs=parentdom.find(\"img.fullscreen\");\r\n\t\t\t\t\tif(width>height){\r\n\t\t\t\t\t\timgs.css({height:\"80%\", width:'auto'});\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\timgs.css({height:\"auto\", width:'100%'});\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\tImageGelly.hasboxbind=true;\r\n\t\t\t}\r\n\r\n\t\t},\r\n\t\tinimgarr:function(src){\r\n\t\t\tvar result=-1;\r\n\t\t\tvar arrs=this.imgs;\r\n\t\t\tfor(var i=0, len=arrs.length; i<len; i++){\r\n\t\t\t\tif(arrs[i]==src){\r\n\t\t\t\t\tresult=i;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn result;\r\n\t\t}\r\n\t};\r\n\r\n\r\n\tvar thegelly;\r\n\tvar gc = function(className,swipeid,container){\r\n\t\tthis.swipeid=swipeid;\r\n\t\tthis.className=className;\r\n\t\tthis.botcontainer=$(\"#\"+container);\r\n\t\tthis.init();\r\n\t};\r\n\tgc.prototype={\r\n\t\tinit:function(){\r\n\t\t\tthis.addEvent();\r\n\r\n\t\t},\r\n\t\taddEvent:function(){\r\n\t\t\tvar that =this;\r\n\t\t\t$('.'+this.className).click(function(e){\r\n\t\t\t\te.preventDefault();\r\n\t\t\t\tvar cursrc=$(this).attr(\"src\");\r\n\t\t\t\tvar index=$(this).index();\r\n\t\t\t\tImageGelly.scolltop=$(\"body\").scrollTop();\r\n\t\t\t\tif(!that.thegelly){\r\n\t\t\t\t\tthat.creategelly(this,index,that.botcontainer);\r\n\t\t\t\t}else if(that.thegelly.inimgarr(cursrc)>-1){\r\n\t\t\t\t\t$(\"#\"+that.swipeid).css({display:'block'});\r\n\t\t\t\t\tthat.creategelly(this,index,that.botcontainer);\r\n\t\t\t\t}else{\r\n\t\t\t\t\t$(\"#\"+that.swipeid).css({display:'block'});\r\n\t\t\t\t\tthat.creategelly(this,index,that.botcontainer);\r\n\t\t\t\t}\r\n\t\t\t})\r\n\r\n\t\t},\r\n\t\tcreategelly:function(target,indexnum,bottomele){\r\n\t\t\tvar cursrc=$(target).attr(\"src\");\r\n\t\t\tvar imgs=[];\r\n\t\t\tvar siblings=$(target).siblings();\r\n\t\t\tfor(var i=0,len=siblings.length;i<len; i++){\r\n\t\t\t\tvar src=siblings.eq(i).attr(\"src\");\r\n\t\t\t\timgs.push(src);\r\n\t\t\t}\r\n\t\t\timgs.splice(indexnum,0, cursrc);\r\n\t\t\tthis.thegelly=new ImageGelly({id:this.swipeid,imgs:imgs,index:indexnum,bottomdiv:bottomele});\r\n\r\n\t\t}\r\n\r\n\t};\r\n\treturn  gc;\r\n})();"]}