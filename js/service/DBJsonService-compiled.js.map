{"version":3,"sources":["DBJsonService.js"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;IACa,a,WAAA,a;AACT;;;;;;AAMA,yBAAa,GAAb,EAAiB,GAAjB,EAAsB;AAAA;;AAClB,SAAK,GAAL,GAAS,GAAT;AACA,QAAG,GAAH,EAAO;AACH,UAAI,MAAM,yBAAe,GAAf,CAAV;AACA,mBAAa,OAAb,CAAqB,GAArB,EAAyB,GAAzB;AACH;AAEJ;;;;;AACD;;;;;8BAKS;AACL,UAAI,OAAK,KAAK,KAAL,CAAW,aAAa,OAAb,CAAqB,KAAK,GAA1B,CAAX,CAAT;AACC,UAAG,IAAH,EAAQ;AACJ,eAAO,IAAP;AACH,OAFD,MAEK;AACG,eAAO,EAAP;AACP;AACL;;;;AACD;;;;4BAIQ,I,EAAK;AACX,UAAI,OAAM,KAAK,OAAL,EAAV;AACE,aAAO,KAAK,IAAL,CAAP;AACH;;;;AACD;;;;2BAIO,I,EAAK;AACR,UAAI,MAAM,yBAAe,IAAf,CAAV;AACA,mBAAa,OAAb,CAAqB,KAAK,GAA1B,EAA8B,GAA9B;AACH;;;;AACD;;;;;+BAKW,I,EAAK,K,EAAM;AACnB,UAAI,OAAM,KAAK,OAAL,EAAV;AACA,WAAK,IAAL,IAAW,KAAX;AACC,cAAQ,GAAR,CAAY,IAAZ;AACA,UAAI,MAAM,yBAAe,IAAf,CAAV;AACD,mBAAa,OAAb,CAAqB,KAAK,GAA1B,EAA8B,GAA9B;AAEF","file":"DBJsonService-compiled.js","sourcesContent":["\r\nexport class DBJsonService{\r\n    /**\r\n     *  DBService 本地缓存服务<a href='../es6/service/imgtext/eg/index.html'> DBService的使用</a>\r\n     * @requires jquery\r\n     * @param zid {String} zid 评论的ID\r\n     * @param ps {int} ps 评论每页条数\r\n     */\r\n    constructor (key,obj) {\r\n        this.key=key;\r\n        if(obj){\r\n            var str = JSON.stringify(obj);\r\n            localStorage.setItem(key,str);\r\n        }\r\n\r\n    };\r\n    /**\r\n     * 根据页码获取评论数据\r\n     * @param callback {Function} 回调函数\r\n     * @param pn {int} 页码 不传值是1\r\n     */\r\n    getJson(){\r\n        var data=JSON.parse(localStorage.getItem(this.key));\r\n         if(data){\r\n             return data;\r\n         }else{\r\n                 return {};\r\n         }\r\n    };\r\n    /**\r\n     * 获取第一页数据\r\n     * @param callback {Function} 回调函数\r\n     */\r\n    getAttr(attr){\r\n      var data= this.getJson();\r\n        return data[attr];\r\n    };\r\n    /**\r\n     * 获取下一页数据\r\n     * @param callback {Function} 回调函数\r\n     */\r\n    modify(json){\r\n        var str = JSON.stringify(json);\r\n        localStorage.setItem(this.key,str);\r\n    };\r\n    /**\r\n     * 循环获取首页数据\r\n     * @param callback {Function} 回调函数\r\n     * @param _interTime {int} 间隔时间(毫秒数)默认是10秒\r\n     */\r\n    modifyAttr(name,value){\r\n       var data= this.getJson();\r\n       data[name]=value;\r\n        console.log(data);\r\n        var str = JSON.stringify(data);\r\n       localStorage.setItem(this.key,str);\r\n\r\n    };\r\n\r\n}\r\n"]}